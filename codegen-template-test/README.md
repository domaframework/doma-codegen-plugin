# Template Test Module

This module demonstrates how to use custom FreeMarker templates with the Doma CodeGen Plugin.

## Overview

The `codegen-template-test` module shows how to:
- Configure custom template directories
- Create custom FreeMarker templates for entities, DAOs, and SQL files
- Override default code generation behavior

## Configuration

The module uses custom templates located in `src/main/resources/custom-templates/`:

```kotlin
domaCodeGen {
    register("customTemplate") {
        // ... database configuration ...
        
        // Use custom templates
        templateDir = file("src/main/resources/custom-templates")
    }
}
```

## Custom Templates

### Entity Template (`entity.ftl`)
The custom entity template adds:
- Serializable interface implementation (`implements java.io.Serializable`)
- Custom helper method `getEntityName()` that returns the entity class name
- Custom copyright header with generation timestamp
- Custom author information via lib.ftl

### DAO Template (`dao.ftl`)
The custom DAO template adds:
- `@MultiInsert` annotation for batch insert operations
- Custom method `insertMulti(List<Entity>)` for bulk inserts
- Custom copyright header with generation timestamp
- Custom author information via lib.ftl

### SQL Template (`selectById.sql.ftl`)
The custom SQL template:
- Explicitly lists all columns instead of using SELECT *
- Includes formatted SQL with proper indentation

### Shared Template (`lib.ftl`)
Contains shared utilities:
- Custom copyright header with project name and generation timestamp
- Author information ("Custom Template Generator")

## Testing

Run tests with:
```bash
./gradlew :codegen-template-test:test
```

The tests verify:
- Code generation completes successfully
- Custom headers are present in generated files ("This file was generated by Doma-CodeGen with custom templates")
- Entities implement Serializable interface
- Entities have custom `getEntityName()` method
- DAOs have custom `insertMulti(List<Entity>)` method
- All expected files are created

## Database Schema

The module uses an H2 in-memory database with three tables:
- `department` - Department master table with various column types
- `employee` - Employee table with foreign key and version column
- `product` - Product catalog table demonstrating different data types

## Notes

- The generated code includes custom headers showing it was created with custom templates
- Templates are placed directly in `src/main/resources/custom-templates/` (entity.ftl, dao.ftl, etc.)
- Templates can access all properties from EntityDesc and DaoDesc classes
- The lib.ftl file contains shared template utilities like copyright headers and author information
- Custom templates override the default Doma templates when `templateDir` is configured